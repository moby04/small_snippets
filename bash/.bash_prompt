# vim: filetype=sh

GIT_BRANCH_COLOR="$(tput setaf 3)"
DIR_COLOR="$(tput setaf 4)"
GIT_BRANCH_COLOR="$(tput setaf 3)"
RESET_COLOR="$(tput sgr0)"

export PROMPT_KUBECTL=0
export PROMPT_GIT=0

enableKubectlPrompt() {
        export PROMPT_KUBECTL=1
}       
disableKubectlPrompt() {
        export PROMPT_KUBECTL=0
}       
enableGitPrompt() {
        export PROMPT_GIT=1
}       
disableGitPrompt() {
        export PROMPT_GIT=0
} 

# If this is an xterm set the title to user@host:dir
case "$TERM" in
xterm*|rxvt*)
    PS1="\[\e]0;${debian_chroot:+($debian_chroot)}\u@\h: \w\a\]$PS1"
    ;;
*)
    ;;
esac

git_branch_prompt() {
  if [ $PROMPT_GIT -eq 1 ]; then	
    
	echo $(git branch 2> /dev/null | sed -e '/^[^*]/d' -e 's/* \(.*\)/(\1)/')
  fi;
}

conditional_kubectl_prompt() {
	if [ $PROMPT_KUBECTL -eq 1 ]; then
		if hash kubectl 2>/dev/null; then
		  echo $(kube_ps1)
		fi;
	fi;
}
# \[\033[01;32m\] <- user color, bold neon green
PS1='${debian_chroot:+($debian_chroot)}$(conditional_kubectl_prompt)\[\033[01;32m\]\u@\h${RESET_COLOR}:${DIR_COLOR}\w${GIT_BRANCH_COLOR}$(git_branch_prompt)${RESET_COLOR}$ '
